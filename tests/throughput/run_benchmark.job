#!/bin/bash
#SBATCH --job-name=acoupipe_throughput
#SBATCH --output=acoupipe_throughput.out
#SBATCH --error=acoupipe_throughput.err
#SBATCH --nodes=1

DIRPATH=/home/wk/kujawski/dfg/acoupipe_throughput/throughput
IMGNAME=/home/wk/kujawski/dfg/container/acoupipe-datasets-submodule_latest.sif

F=1000

for dataset in {"dataset2","dataset1"}; do
    for tasks in {1,2,4,8,16,32}; do
        for features in {"csm","csmtriu","sourcemap","eigmode"}; do
            echo "Running $dataset, $tasks tasks, $features"
            srun --nodes=1 --ntasks-per-node=1 --exclusive singularity exec -B $DIRPATH $IMGNAME python -u $DIRPATH/main.py --datasets $dataset --task_list $tasks --features=$features  #--f=$F 
        done
    done
done




